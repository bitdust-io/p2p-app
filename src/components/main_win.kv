<CustomContentNavigationDrawer>:

    ScrollView:

        MDList:
            id: menu_items
            padding: dp(0)

            CustomActionTopAppBarIconButton:
                icon: 'arrow-left'
                md_bg_color: app.color_transparent
                on_release: app.main_window.nav().set_state("close")

            Widget:
                size_hint: None, None
                width: 1
                height: dp(50)

            OneLineIconListItem:
                id: menu_item_status
                text: "status"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('engine_status_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "cellphone-information"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('engine_status_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_my_identity
                text: "my identity"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('my_id_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "card-account-details"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('my_id_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_chat
                text: "chat"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('conversations_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "chat-outline"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('conversations_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_friends
                text: "contacts"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('friends_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "contacts"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('friends_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_private_files
                text: "my files"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('private_files_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "file-tree"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('private_files_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_shares
                text: "shared files"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('shares_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "folder-arrow-left-right"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('shares_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_settings
                text: "settings"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('settings_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "cogs"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('settings_screen', verify_state=True)

            OneLineIconListItem:
                id: menu_item_about
                text: "about"
                on_release:
                    app.main_window.nav().set_state("close")
                    app.main_window.select_screen('about_screen', verify_state=True)
                CustomIconPackLeftWidget:
                    icon: "information-outline"
                    icon_size: "32sp"
                    md_bg_color: app.color_transparent
                    md_bg_color_disabled: app.color_transparent
                    on_release:
                        app.main_window.nav().set_state("close")
                        app.main_window.select_screen('about_screen', verify_state=True)


<MainWin>:
    id: main_win
    pos_hint: {"bottom": 1}

    canvas.before:
        Color:
            rgba: app.color_white
        Rectangle:
            pos: self.pos
            size: self.size

    Widget:
        id: dropdown_menu_placeholder
        size_hint: None, None
        size: 1, 1
        pos_hint: {"center_x": .99, "center_y": .98}

    CustomTopToolbar:
        id: toolbar
        pos_hint: {"top": 1}
        elevation: 0
        icon: "search-web"
        title: "BitDust"
        anchor_title: 'center'
        specific_text_color: app.color_white
        left_action_items: [["menu", root.on_left_menu_button_clicked, ], ]
        right_action_items: []

    MDNavigationLayout:
        id: nav_wrapper
        pos_hint: {"top": 1}

        ScreenManager:
            id: screen_manager
            transition: NoTransition()

        MDNavigationDrawer:
            id: nav_drawer
            type: "modal"
            width: dp(220)
            opening_time: 0
            closing_time: 0
            elevation: 0
            radius: 0

            CustomContentNavigationDrawer:
                id: nav_drawer_content

    CustomBottomAppBar:
        id: footer
        size_hint_y: None
        height: dp(28)

        CustomBottomToolbar:
            id: footer_bar
            size_hint_y: None
            height: dp(28)
            title: ""
            icon: "plus"
            type: "bottom"
            mode: "end"
            left_action_items:
                [{"icon": "micro-chip", "icon_pack": "IconICO", "tooltip": "BitDust node status",
                "cb": lambda x: [app.main_window.nav().set_state("close"), app.main_window.select_screen('engine_status_screen', clear_stack=False, verify_state=True)]},
                {"icon": "id-card", "icon_pack": "IconICO", "tooltip": "my identity",
                "cb": lambda x: [app.main_window.nav().set_state("close"), app.main_window.select_screen('my_id_screen', clear_stack=False, verify_state=True)]},
                {"icon": "share-variant", "icon_pack": "Icon", "tooltip": "peer-to-peer connections",
                "cb": lambda x: [app.main_window.nav().set_state("close"), app.main_window.select_screen('connecting_screen', clear_stack=False, verify_state=True)]},
                {"icon": "family-tree", "icon_pack": "Icon", "tooltip": "distributed hash table",
                "cb": lambda x: None},
                {"icon": "transit-connection-variant", "icon_pack": "Icon", "tooltip": "safe packets re-routing",
                "cb": lambda x: None},
                {"icon": "database", "icon_pack": "IconFA", "tooltip": "distributed storage", "size": "18sp",
                "cb": lambda x: [app.main_window.nav().set_state("close"), app.main_window.select_screen('my_storage_info_screen', clear_stack=False, verify_state=True)]},
                {"icon": "comments", "icon_pack": "IconFA", "tooltip": "chat messages",
                "cb": lambda x: [app.main_window.nav().set_state("close"), app.main_window.select_screen('conversations_screen', clear_stack=False, verify_state=True)]},
                {"icon": "wifi-arrow-up-down", "icon_pack": "Icon", "tooltip": "uploading / downloading",
                "cb": lambda x: None},]
            on_action_button: root.on_hot_button_clicked()
